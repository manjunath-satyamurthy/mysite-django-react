webpackJsonp([5],{94:function(e,t,o){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=o(4),s=o.n(l),c=o(5),i=o.n(c),u=o(6),m=function(){function e(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,o,a){return o&&e(t.prototype,o),a&&e(t,a),t}}(),p=function(e){return window.location.host.indexOf(":")>-1?(console.log(window.location.host+"/"+e),"http://"+window.location.host+"/"+e):e},h=function(e){function t(){var e,o,r,l;a(this,t);for(var s=arguments.length,c=Array(s),i=0;i<s;i++)c[i]=arguments[i];return o=r=n(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.onClick=function(){r.props.setModalName(r.props.url)},l=o,n(r,l)}return r(t,e),m(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"photo-preview",onClick:this.onClick},s.a.createElement("img",{src:p(this.props.url),alt:this.props.comment}))}}]),t}(l.Component),d=function(e){function t(){var e,o,r,l;a(this,t);for(var s=arguments.length,c=Array(s),i=0;i<s;i++)c[i]=arguments[i];return o=r=n(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.onClick=function(){r.props.onClick(r.props.tag)},l=o,n(r,l)}return r(t,e),m(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"photo-preview",onClick:this.onClick},s.a.createElement("img",{src:p(this.props.url),alt:this.props.tag}),s.a.createElement("h3",null,s.a.createElement("span",null,this.props.tag)))}}]),t}(l.Component),f=function(e){function t(){var e,o,r,l;a(this,t);for(var s=arguments.length,c=Array(s),i=0;i<s;i++)c[i]=arguments[i];return o=r=n(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.onLeftClick=function(){r.props.setModalName(r.props.previousPhoto)},r.onRightClick=function(){r.props.setModalName(r.props.nextPhoto)},r.onKeyDown=function(e){37===e.keyCode?r.props.setModalName(r.props.previousPhoto):39===e.keyCode?r.props.setModalName(r.props.nextPhoto):27===e.keyCode&&r.props.setModalName(null)},l=o,n(r,l)}return r(t,e),m(t,[{key:"componentWillMount",value:function(){console.log("mounted PhotoModal"),document.addEventListener("keydown",this.onKeyDown,!1)}},{key:"componentWillUnmount",value:function(){console.log("unmounted PhotoModal"),document.removeEventListener("keydown",this.onKeyDown,!1)}},{key:"render",value:function(){return s.a.createElement("table",{className:"modal-content-table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("p",{className:"left-arrow",onClick:this.onLeftClick},s.a.createElement("i",{className:"fa fa-chevron-left",style:{color:"white"}}))),s.a.createElement("td",{className:"image-cell"},s.a.createElement("img",{src:p(this.props.currentPhoto),alt:"Failed to Load",key:this.props.currentPhoto+this.props.nextPhoto}),s.a.createElement("h3",null,this.props.comment)),s.a.createElement("td",null,s.a.createElement("p",{className:"right-arrow",onClick:this.onRightClick},s.a.createElement("i",{className:"fa fa-chevron-right",style:{color:"white"}}))))))}}]),t}(l.Component),g=function(e){function t(e){a(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.goBack=function(){o.setState({currentTag:null,showModalName:null})},o.onTagClick=function(e){o.setState({currentTag:e})},o.setModalName=function(e){o.setState({showModalName:e})},o.state={shouldPageLoad:!0,images:null,showModalName:null,currentTag:null},o.setModalName=o.setModalName.bind(o),o.onTagClick=o.onTagClick.bind(o),o.goBack=o.goBack.bind(o),o}return r(t,e),m(t,[{key:"render",value:function(){var e=this;this.state.shouldPageLoad&&fetch(window.location.origin+"/get_photos",{method:"GET"}).then(function(e){return e.json()}).then(function(t){e.setState({images:t,shouldPageLoad:!1})});var t={},o=[],a=this.state.images;for(var n in a)n=parseInt(n,10),a[n].tag in t||(t[a[n].tag]={},t[a[n].tag].images=[],o.push(s.a.createElement(d,{url:a[n].image_url,tag:a[n].tag,key:a[n].image_url,onClick:this.onTagClick}))),t[a[n].tag].images.push(s.a.createElement(h,{url:a[n].image_url,tag:a[n].tag,key:a[n].image_url,comment:a[n].comment,setModalName:this.setModalName}));for(var r in t){var l=0,c=[],i=t[r].images;for(var m in i){var p=i[m].props.url,g=i[m].props.comment,v="",y="",k="",E=i.length-1;k=p,v=0===l?i[E].props.url:i[l-1].props.url,y=l===E?i[0].props.url:i[l+1].props.url;var w=s.a.createElement(f,{currentPhoto:k,nextPhoto:y,previousPhoto:v,setModalName:this.setModalName,comment:g});c.push(s.a.createElement(u.f,{className:"modal",modalContent:w,key:k,name:k,showModalName:this.state.showModalName})),l+=1,t[r].modals=c}}if(!this.shouldPageLoad)return this.state.currentTag?s.a.createElement("div",null,s.a.createElement("button",{className:"photo-back",onClick:this.goBack},s.a.createElement("i",{className:"fa fa-caret-left",style:{fontWeight:"bold",fontSize:"8em",color:"white"}})),s.a.createElement("div",{className:"background photos-background"}),s.a.createElement("h1",{className:"page-heading"},this.state.currentTag),s.a.createElement("div",{className:"photo-overview"},s.a.createElement("div",null,t[this.state.currentTag].images),t[this.state.currentTag].modals)):s.a.createElement("div",null,s.a.createElement("div",{className:"background photos-background"}),s.a.createElement("h1",{className:"page-heading"},"Photos"),s.a.createElement("div",{className:"photo-overview"},s.a.createElement("div",null,o)))}}]),t}(l.Component);i.a.render(s.a.createElement(g,null),document.getElementById("photos-react-root"))}},[94]);